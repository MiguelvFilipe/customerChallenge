<div *ngIf="isLoading">Loading...</div>
<div *ngIf="errorMessage">{{ errorMessage }}</div>
<div *ngIf="!isLoading && !errorMessage">
  <div>
    <button (click)="onPrevPage()" [disabled]="isLoading || currentPage === 1">Previous</button>
    <span>Page {{ currentPage }}</span>
    <button (click)="onNextPage()" [disabled]="isLoading || !hasMoreData">Next</button>
    <select [(ngModel)]="limit" (change)="onLimitChange(limit)" [disabled]="isLoading">
      <option value="2">2</option>
      <option value="5">5</option>
      <option value="10">10</option>
    </select>
  </div>
  <div>
    <label>
      <input type="checkbox" [(ngModel)]="showHasContract" (change)="onShowHasContractChange()" />
      Show Only Customers with Contract
    </label>
  </div>
  <div>
    <input type="text" [(ngModel)]="searchQuery" placeholder="Search by first or last name" />
    <select [(ngModel)]="searchType">
      <option value="firstName">First Name</option>
      <option value="lastName">Last Name</option>
    </select>
    <button (click)="onSearch()" [disabled]="isLoading">Search</button>
    <button (click)="clearSearch()" [disabled]="isLoading || !isInSearchMode">Clear Search</button>
  </div>
  <div>
    <button (click)="refreshData()" [disabled]="isLoading">Refresh Data</button>
  </div>
  <div *ngIf="noDataMessage">{{ noDataMessage }}</div>
  <ul *ngIf="!noDataMessage">
    <li
      *ngFor="let customer of customerList.customerList"
      (click)="onCustomerClick(customer.id)"
    >
      <h1>{{ customer.firstName }} <span *ngIf="isBirthdayThisMonth(customer.birthDate)">ðŸŽ‚</span></h1>
      <button (click)="onDeleteCustomer(customer.id)">Delete</button>
      <button (click)="onEditCustomer(customer.id)">Edit</button>
    </li>
  </ul>
  <div *ngIf="editCustomer">
    <h2>Edit Customer</h2>
    <div>
      <label>First Name:</label>
      <input type="text" [(ngModel)]="editCustomer.firstName" required />
    </div>
    <div>
      <label>Last Name:</label>
      <input type="text" [(ngModel)]="editCustomer.lastName" required />
    </div>
    <div>
      <label>Birth Date:</label>
      <input type="date" [(ngModel)]="editCustomer.birthDate" />
    </div>
    <div>
      <label>Email:</label>
      <input type="email" [(ngModel)]="editCustomer.email" />
    </div>
    <div>
      <label>Avatar URL:</label>
      <input type="text" [(ngModel)]="editCustomer.avatar" />
    </div>
    <div>
      <label>
        <input type="checkbox" [(ngModel)]="editCustomer.hasContract" />
        Has Contract
      </label>
    </div>
    <button (click)="onUpdateCustomer()">Update Customer</button>
    <button (click)="resetEditCustomerForm()">Cancel</button>
  </div>
  <div>
    <h2>Create New Customer</h2>
    <div>
      <label>First Name:</label>
      <input type="text" [(ngModel)]="newCustomer.firstName" required />
    </div>
    <div>
      <label>Last Name:</label>
      <input type="text" [(ngModel)]="newCustomer.lastName" required />
    </div>
    <div>
      <label>Birth Date:</label>
      <input type="date" [(ngModel)]="newCustomer.birthDate" />
    </div>
    <div>
      <label>Email:</label>
      <input type="email" [(ngModel)]="newCustomer.email" />
    </div>
    <div>
      <label>Avatar URL:</label>
      <input type="text" [(ngModel)]="newCustomer.avatar" />
    </div>
    <div>
      <label>
        <input type="checkbox" [(ngModel)]="newCustomer.hasContract" />
        Has Contract
      </label>
    </div>
    <button (click)="onCreateCustomer()">Create Customer</button>
  </div>
</div>
